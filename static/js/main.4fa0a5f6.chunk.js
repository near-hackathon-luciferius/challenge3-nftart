(this["webpackJsonphello-react"]=this["webpackJsonphello-react"]||[]).push([[0],{155:function(e,t,n){},156:function(e){e.exports=JSON.parse('{"name":"hello-react","version":"1.0.1","homepage":"https://near-hackathon-luciferius.github.io/challenge3-nftart","private":true,"dependencies":{"@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^11.1.0","@testing-library/user-event":"^12.1.10","js-sha256":"^0.9.0","materialize-css":"^1.0.0-rc.2","near-api-js":"^0.42.0","react":"^16.13.1","react-burger-menu":"^3.0.6","react-dom":"^16.13.1","react-materialize":"^3.9.9","react-router-dom":"^6.3.0","react-scripts":"4.0.3","save":"^2.4.0","save-dev":"^0.0.1-security","styled-components":"^5.2.0","web-vitals":"^1.0.1"},"scripts":{"start":"parcel src/index.html","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build","deploy":"gh-pages -d build -u \'Pages Bot <pages.bot@nonexisting.io>\'"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"gh-pages":"^3.2.3","parcel-bundler":"^1.12.5"}}')},163:function(e,t){},173:function(e,t){},218:function(e,t,n){"use strict";n.r(t);var r=n(87),a=n(29),o=n(5),c=n.n(o),s=n(0),i=n.n(s),l=n(41),u=n.n(l),h=n(20),d=n(16),p=n(53),m=n.n(p),b=n(1);function j(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("p",{children:"This app demonstrates a key element of NEAR\u2019s UX: once an app has permission to make calls on behalf of a user (that is, once a user signs in), the app can make calls to the blockchain for them without prompting extra confirmation. So you\u2019ll see that if you use the hello button, you will get a response right away."}),Object(b.jsx)("p",{children:"But if you do use the remember me button, then NEAR will double-check that you\u2019re ok with sending money to this app for remebering the name."}),Object(b.jsx)("p",{children:"Go ahead and sign in to try it out!"})]})}var g=n(4),f=n(82),O=n(17),w=function(e){var t=e.currentUser,n=e.signIn,r=e.signOut;return Object(b.jsxs)("div",{id:"App",children:[Object(b.jsxs)(f.slide,{pageWrapId:"page-wrapper",outerContainerId:"App",children:[Object(b.jsx)(h.b,{className:"menu-item",to:"/",children:"Dashboard"}),Object(b.jsx)(h.b,{className:"menu-item",to:"/collection",children:"My Collection"}),Object(b.jsx)(h.b,{className:"menu-item",to:"/marketplace",children:"Discover"}),Object(b.jsx)(h.b,{className:"menu-item",to:"/docs",children:"Docs"})]}),Object(b.jsx)("main",{id:"page-wrapper",children:Object(b.jsx)(g.a,{})}),t?Object(b.jsx)(O.Button,{onClick:r,floating:!0,large:!0,className:"btn-login",icon:Object(b.jsx)(O.Icon,{medium:!0,children:"account_balance_wallet"}),tooltip:"Log out "+t.accountId+"."}):Object(b.jsx)(O.Button,{onClick:n,floating:!0,large:!0,className:"btn-login",icon:Object(b.jsx)(O.Icon,{medium:!0,children:"broken_image"}),tooltip:"Log in using NEAR wallet."})]})},v=n(83),x=n(84),_=n(88),S=n(86),N=n.p+"static/media/404.6fa35088.jpg",y=function(e){Object(_.a)(n,e);var t=Object(S.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){return Object(b.jsx)("img",{src:N,alt:"Nothing is here.",width:"900",style:{margin:"10em"}})}}]),n}(i.a.Component),E=y;function U(e){var t=e.onSubmit,n=e.currentUser;return Object(b.jsx)("form",{onSubmit:t,children:Object(b.jsxs)("fieldset",{id:"fieldset",children:[Object(b.jsxs)("p",{children:["Say hello, ",n.accountId,"!"]}),Object(b.jsx)("div",{className:"highlight",children:Object(b.jsx)(O.TextInput,{autoComplete:"off",autoFocus:!0,id:"name_prompt",className:"name_input",label:"Your name",required:!0})}),Object(b.jsx)(O.Button,{type:"submit",value:"hello",small:!0,className:"margin_button",tooltip:"Executes the method hello which returns a message from NEAR. This does not require a confirmation.",children:"Hello"}),Object(b.jsx)(O.Button,{type:"submit",value:"remember",small:!0,className:"margin_button",tooltip:"Executes the method remember_me which stores the given name in the smart contract. This does require a confirmation.",children:"Remember me"})]})})}var C=function(e){var t=e.version,n=e.answer,r=e.onSubmit,a=e.currentUser;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("header",{children:Object(b.jsxs)("h1",{children:["NEAR Challenge #3 - NFT Art - ",t]})}),Object(b.jsxs)("h5",{children:["Status: ",n]}),Object(b.jsx)(U,{onSubmit:r,currentUser:a})]})},T=(n(154),n(155),n(156).version);n(157);var k=m()(3).times(Math.pow(10,13)).toFixed(),I=function(e){var t=e.contract,n=e.currentUser,r=e.nearConfig,o=e.wallet,i=e.lastTransaction,l=e.provider,u=e.errorMessage,h=Object(s.useState)(u?decodeURI(u):n?"Thinking please wait...":"Please login first."),p=Object(d.a)(h,2),f=p[0],O=p[1];return Object(s.useEffect)((function(){function e(){return(e=Object(a.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.txStatus(t,n);case 2:r=e.sent,O(r.receipts_outcome[0].outcome.logs.pop());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r(){return(r=Object(a.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get_last_message({account_id:n});case 2:r=e.sent,O(r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n&&i&&!u?function(t,n){e.apply(this,arguments)}(i,n.accountId):n&&!u&&function(e){r.apply(this,arguments)}(n.accountId),window.history.pushState({},"",window.location.origin+window.location.pathname)}),[n,u,i,t,l]),Object(b.jsx)(g.d,{children:Object(b.jsxs)(g.b,{path:"/",element:Object(b.jsx)(w,{currentUser:n,signIn:function(){o.requestSignIn({contractId:r.contractName,methodNames:[t.hello.name]},"NEAR Challenge #3 - NFT Art",null,null)},signOut:function(){o.signOut(),window.location.replace(window.location.origin+window.location.pathname)}}),children:[Object(b.jsx)(g.b,{index:!0,element:n?Object(b.jsx)(C,{version:T,onSubmit:function(e){e.preventDefault();var n=e.target.elements,r=n.fieldset,a=n.name_prompt;r.disabled=!0,"hello"===e.nativeEvent.submitter.value?t.hello({name:a.value},k,0).then((function(e){r.disabled=!1,a.value="",a.focus(),O(e)})):t.remember_me({name:a.value},k,m()("0.00045").times(Math.pow(10,24)).toFixed()).then((function(e){r.disabled=!1,a.value="",a.focus(),O(e)}))},currentUser:n,answer:f}):Object(b.jsx)(j,{})}),Object(b.jsx)(g.b,{path:"*",element:Object(b.jsx)(E,{})})]})})},A=n(85),R=n.n(A),D=n(30);function P(){return(P=Object(a.a)(c.a.mark((function e(){var t,n,a,o,s,i,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=R()(Object({NODE_ENV:"production",PUBLIC_URL:"/challenge3-nftart",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).NEAR_ENV||"testnet"),n=new D.keyStores.BrowserLocalStorageKeyStore,e.next=4,D.connect(Object(r.a)({keyStore:n},t));case 4:if(a=e.sent,!(o=new D.WalletConnection(a)).getAccountId()){e.next=12;break}return e.t0=o.getAccountId(),e.next=10,o.account().state();case 10:e.t1=e.sent.amount,s={accountId:e.t0,balance:e.t1};case 12:return e.next=14,new D.Contract(o.account(),t.contractName,{viewMethods:["get_last_message"],changeMethods:["hello","remember_me"],sender:o.getAccountId()});case 14:return i=e.sent,l=a.connection.provider,e.abrupt("return",{contract:i,currentUser:s,nearConfig:t,walletConnection:o,provider:l});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.nearInitPromise=function(){return P.apply(this,arguments)}().then((function(e){var t,n,r=e.contract,a=e.currentUser,o=e.nearConfig,c=e.walletConnection,s=e.provider,i=new URLSearchParams(window.location.search);i.has("transactionHashes")&&(t=i.get("transactionHashes")),i.has("errorMessage")&&(n=i.get("errorMessage")),u.a.render(Object(b.jsx)(h.a,{children:Object(b.jsx)(I,{contract:r,currentUser:a,nearConfig:o,wallet:c,lastTransaction:t,provider:s,errorMessage:n})}),document.getElementById("root"))}))},85:function(e,t){var n=Object({NODE_ENV:"production",PUBLIC_URL:"/challenge3-nftart",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).CONTRACT_NAME||"hello.cryptosketches.testnet";e.exports=function(e){switch(e){case"production":case"mainnet":return{networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",contractName:n,walletUrl:"https://wallet.near.org",helperUrl:"https://helper.mainnet.near.org"};case"development":case"testnet":return{networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",contractName:n,walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org"};case"betanet":return{networkId:"betanet",nodeUrl:"https://rpc.betanet.near.org",contractName:n,walletUrl:"https://wallet.betanet.near.org",helperUrl:"https://helper.betanet.near.org"};case"local":return{networkId:"local",nodeUrl:"http://localhost:3030",keyPath:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/challenge3-nftart",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).HOME,"/.near/validator_key.json"),walletUrl:"http://localhost:4000/wallet",contractName:n};case"test":case"ci":return{networkId:"shared-test",nodeUrl:"https://rpc.ci-testnet.near.org",contractName:n,masterAccount:"test.near"};case"ci-betanet":return{networkId:"shared-test-staging",nodeUrl:"https://rpc.ci-betanet.near.org",contractName:n,masterAccount:"test.near"};default:throw Error("Unconfigured environment '".concat(e,"'. Can be configured in src/config.js."))}}}},[[218,1,2]]]);
//# sourceMappingURL=main.4fa0a5f6.chunk.js.map